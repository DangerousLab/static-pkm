const e={activeInstance:null,activeNode:null,baseSidebarWidth:240,hoverSidebarWidth:240,contentMaxWidth:980,hoverNeeded:!1,searchIndex:[],selectedResultIndex:-1,moduleDisplayNames:{},preloadedModules:new Set,navigationTree:null,currentFolder:null,loadedScripts:new Set,moduleFactories:new Map,moduleReadyCallbacks:new Map,folderWidthCache:new Map,moduleCodeCache:new Map,preloadPromises:new Map},t={getTheme:()=>document.documentElement.getAttribute("data-theme")||"dark",subscribe:e=>(document.addEventListener("themechange",e),()=>document.removeEventListener("themechange",e))},n={htmlEl:document.documentElement,sidebar:null,sidebarToggle:null,sidebarNav:null,sidebarBreadcrumb:null,card:null,themeToggleBtn:null,themeIcon:null,searchInput:null,searchClear:null,searchResults:null,mainContent:null};function a(){n.sidebar=document.getElementById("sidebar"),n.sidebarToggle=document.getElementById("sidebarToggle"),n.sidebarNav=document.getElementById("sidebarNav"),n.sidebarBreadcrumb=document.getElementById("sidebarBreadcrumb"),n.card=document.getElementById("contentCard"),n.themeToggleBtn=document.getElementById("themeToggle"),n.themeIcon=document.getElementById("themeIcon"),n.searchInput=document.getElementById("searchInput"),n.searchClear=document.getElementById("searchClear"),n.searchResults=document.getElementById("searchResults"),n.mainContent=document.querySelector(".main-content")}function r(e,t){if(e.path===t)return e;if(!e.children)return null;for(const n of e.children){const e=r(n,t);if(e)return e}return null}function o(e,t){if(!e)return null;if(("module"===e.type||"page"===e.type||"document"===e.type)&&e.id===t)return e;if(!e.children)return null;for(const n of e.children){const e=o(n,t);if(e)return e}return null}function s(){return window.innerWidth>=841}function i(){if(window.matchMedia("(max-height: 600px) and (orientation: landscape)").matches)return!0;if(window.innerWidth<841)return!0;const t=e.baseSidebarWidth,n=e.contentMaxWidth+2*t+32;return window.innerWidth<n}function d(e){return"./"+e}function c(e){return"create"+e.charAt(0).toUpperCase()+e.slice(1)}function l(t){const n=e.moduleReadyCallbacks.get(t);if(n){const a=window[t];n.forEach(e=>e(a)),e.moduleReadyCallbacks.delete(t)}}const u=new Map;function m(e){const{id:t,type:n,url:a,content:r,integrity:o,name:s}=e;if(!t||!n)return void console.error("[PlatformResources] Invalid resource config:",e);if(u.has(t))return;const i={id:t,type:n,url:a,content:r,integrity:o,name:s||t,loaded:!1};u.set(t,i)}function h(e){const t=u.get(e);t?t.loaded=!0:console.error(`[PlatformResources] Unknown resource ID: ${e}`)}const p=new Set;let f=null;async function g(){if(f)return f;if(p.has("fontawesome"))return Promise.resolve();const e="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/7.0.1/css/all.min.css";return m({id:"fontawesome-css",type:"css",url:e,name:"FontAwesome Icons"}),f=async function(e,t=null,n="anonymous"){return p.has(e)?Promise.resolve():new Promise((a,r)=>{const o=document.createElement("link");o.rel="stylesheet",o.href=e,t&&(o.integrity=t,o.crossOrigin=n),o.onload=()=>{p.add(e),a()},o.onerror=()=>{console.error("[DynamicLoader] Failed to load CSS:",e),r(new Error(`Failed to load CSS: ${e}`))},document.head.appendChild(o)})}(e).then(()=>{p.add("fontawesome"),h("fontawesome-css"),f=null}).catch(e=>{throw console.error("[DynamicLoader] FontAwesome load failed:",e),f=null,e}),f}function y(e){switch(e){case"module":return'<i class="fa-solid fa-gear"></i>';case"page":return'<i class="fa-regular fa-file"></i>';case"document":return'<i class="fa-regular fa-file-lines"></i>';case"folder":return'<i class="fa-regular fa-folder"></i>';case"back":return'<i class="fa-solid fa-caret-left"></i>';default:return'<i class="fa-solid fa-circle"></i>'}}const v={"logo-dark":null,"logo-light":null,"banner-dark":null,"banner-light":null};let w=!1;function b(e){const t=document.getElementById("theme-color-meta");t&&t.setAttribute("content","dark"===e?"#1f1f1f":"#f3f4f6")}function E(e,t,n){const a=v[t];if(a&&a.complete&&a.naturalWidth>0){if(e.src===a.src)return e;const t=a.cloneNode(!1);return Array.from(e.attributes).forEach(e=>{"src"!==e.name&&t.setAttribute(e.name,e.value)}),t.className=e.className,t.style.pointerEvents="none",t.style.userSelect="none",e.parentNode.replaceChild(t,e),t}return console.warn(`[Theme] Cache miss for ${t}, using fallback (HTTP request)`),e.src=n,e}function I(e){e&&e.addEventListener("animationend",function t(){e.style.willChange="auto",e.removeEventListener("animationend",t)},{once:!0})}function L(){const t="dark"===(n.htmlEl.getAttribute("data-theme")||"dark")?"light":"dark";n.htmlEl.setAttribute("data-theme",t),n.themeIcon.innerHTML="dark"===t?'<i class="fa-regular fa-moon"></i>':'<i class="fa-regular fa-sun"></i>';const a=document.getElementById("landscapeThemeIcon");a&&(a.innerHTML="dark"===t?'<i class="fa-regular fa-moon"></i>':'<i class="fa-regular fa-sun"></i>'),b(t),function(e){if(w)return;w=!0;let t=document.getElementById("headerLogo"),n=document.getElementById("headerBanner");const a=document.querySelector(".header-tagline");let r=document.getElementById("landscapeLogo");if(t&&n){t.classList.remove("animate"),n.classList.remove("animate"),a&&a.classList.remove("animate"),t.offsetWidth,n.offsetWidth,a&&a.offsetWidth,t.style.animation="none",n.style.animation="none",a&&(a.style.animation="none");const r="dark"===e?"banner-dark":"banner-light",o="dark"===e?"./assets/banner-dark.png":"./assets/banner-light.png";t=E(t,"dark"===e?"logo-dark":"logo-light","dark"===e?"./assets/logo-dark.png":"./assets/logo-light.png"),n=E(n,r,o),requestAnimationFrame(()=>{t.style.animation="",n.style.animation="",a&&(a.style.animation=""),requestAnimationFrame(()=>{t.classList.add("animate"),n.classList.add("animate"),a&&a.classList.add("animate"),I(t),I(n),a&&I(a),setTimeout(()=>{w=!1},50)})})}r&&(r.classList.remove("animate"),r.offsetWidth,r.style.animation="none",r=E(r,"dark"===e?"logo-dark":"logo-light","dark"===e?"./assets/logo-dark.png":"./assets/logo-light.png"),requestAnimationFrame(()=>{r.style.animation="",requestAnimationFrame(()=>{r.classList.add("animate"),I(r)})}))}(t);const r=new CustomEvent("themechange",{detail:{theme:t}});document.dispatchEvent(r),e.activeInstance&&"function"==typeof e.activeInstance.onThemeChange&&requestAnimationFrame(()=>{e.activeInstance&&"function"==typeof e.activeInstance.onThemeChange&&e.activeInstance.onThemeChange(t)})}async function C(){await function(){const e=[{key:"logo-dark",src:"./assets/logo-dark.png"},{key:"logo-light",src:"./assets/logo-light.png"},{key:"banner-dark",src:"./assets/banner-dark.png"},{key:"banner-light",src:"./assets/banner-light.png"}].map(({key:e,src:t})=>new Promise((n,a)=>{const r=new Image;r.onload=()=>{v[e]=r,n()},r.onerror=()=>{console.warn(`[Theme] Failed to preload ${e}`),v[e]=r,n()},r.src=t}));return Promise.all(e).then(()=>{})}(),await g(),n.themeToggleBtn.addEventListener("click",L);const e=document.getElementById("landscapeThemeToggle");e&&e.addEventListener("click",L);const t=n.htmlEl.getAttribute("data-theme")||"dark";n.themeIcon.innerHTML="dark"===t?'<i class="fa-regular fa-moon"></i>':'<i class="fa-regular fa-sun"></i>';const a=document.getElementById("landscapeThemeIcon");a&&(a.innerHTML="dark"===t?'<i class="fa-regular fa-moon"></i>':'<i class="fa-regular fa-sun"></i>'),b(t)}let x=!1,M=!1;function A(){return window.matchMedia("(max-height: 600px) and (orientation: landscape)").matches}function k(){A()||s()&&"true"===n.sidebar.getAttribute("data-open")&&(x&&e.hoverNeeded?n.sidebar.style.width=e.hoverSidebarWidth+"px":n.sidebar.style.width=e.baseSidebarWidth+"px")}async function T(){const t=!("true"===n.sidebar.getAttribute("data-open"));if(t&&!M&&(await async function(){const e=document.querySelector(".sidebar-search");if(!e)return void console.warn("[Sidebar] .sidebar-search container not found");await g(),e.innerHTML='\n    <div class="search-input-wrapper">\n      <span class="search-icon">\n        <i class="fa-solid fa-magnifying-glass"></i>\n      </span>\n      <input\n        type="text"\n        id="searchInput"\n        class="search-input"\n        placeholder="Search (Ctrl+K)"\n        aria-label="Search any pages"\n        autocomplete="off"\n      />\n      <button\n        id="searchClear"\n        class="search-clear"\n        type="button"\n        aria-label="Clear search"\n        style="display: none;"\n      >\n        <i class="fa-solid fa-xmark"></i>\n      </button>\n    </div>\n    <div id="searchResults" class="search-results" style="display: none;"></div>\n  ',n.searchInput=document.getElementById("searchInput"),n.searchClear=document.getElementById("searchClear"),n.searchResults=document.getElementById("searchResults");const{initSearch:t}=await Promise.resolve().then(function(){return ie});t()}(),M=!0),A()){n.sidebar.setAttribute("data-open",String(t)),n.sidebarToggle.setAttribute("data-open",String(t));const e=document.getElementById("landscapeToggle");return void(e&&e.setAttribute("data-open",String(t)))}if(s())if(t){n.sidebar.setAttribute("data-open","true"),n.sidebarToggle.setAttribute("data-open","true");const t=document.getElementById("landscapeToggle");t&&t.setAttribute("data-open","true"),n.sidebar.style.width=e.baseSidebarWidth+"px"}else{const e=n.sidebar.getBoundingClientRect().width;n.sidebar.style.width=e+"px",n.sidebar.setAttribute("data-open","false"),n.sidebarToggle.setAttribute("data-open","false");const t=document.getElementById("landscapeToggle");t&&t.setAttribute("data-open","false"),x=!1,n.sidebar.addEventListener("transitionend",function e(t){"transform"===t.propertyName&&"true"!==n.sidebar.getAttribute("data-open")&&(n.sidebar.style.width=""),n.sidebar.removeEventListener("transitionend",e)})}else{n.sidebar.setAttribute("data-open",String(t)),n.sidebarToggle.setAttribute("data-open",String(t));const e=document.getElementById("landscapeToggle");e&&e.setAttribute("data-open",String(t))}}function S(){n.sidebarNav.querySelectorAll(".nav-item").forEach(e=>e.classList.remove("active"))}function P(){A()||s()&&"true"===n.sidebar.getAttribute("data-open")&&(x=!0,e.hoverNeeded?n.sidebar.style.width=e.hoverSidebarWidth+"px":n.sidebar.style.width=e.baseSidebarWidth+"px")}function R(t){if(A())return;if(!s())return;if("true"!==n.sidebar.getAttribute("data-open"))return;const a=t.relatedTarget;a&&n.sidebar.contains(a)||(x=!1,n.sidebar.style.width=e.baseSidebarWidth+"px")}function N(){if(!n.sidebarToggle)return void console.error("[Sidebar] sidebarToggle element not found - cannot initialize");n.sidebarToggle.addEventListener("click",T);const e=document.getElementById("landscapeToggle");e&&e.addEventListener("click",T),n.sidebar.addEventListener("mouseenter",P),n.sidebar.addEventListener("mouseleave",R)}function $(){return M}var F=Object.freeze({__proto__:null,applySidebarWidth:k,clearSidebarActive:S,initSidebar:N,isSidebarContentInitialized:$,toggleSidebar:T});let B=!1,W=null;async function D(){return B?Promise.resolve():W||(m({id:"mathjax-output-css",type:"style",name:"MathJax Output CSS",content:'\n      /* MathJax CHTML Output Styling (Font-Based) */\n      mjx-container {\n        display: inline-block;\n        margin: 0;\n        padding: 0;\n      }\n      \n      mjx-container[display="true"] {\n        display: block;\n        margin: 1em 0;\n        text-align: center;\n      }\n      \n      /* Inherit theme colors */\n      mjx-container {\n        color: inherit;\n      }\n      \n      /* Font rendering improvements */\n      mjx-container mjx-math {\n        display: inline-block;\n        line-height: 0;\n      }\n      \n      mjx-container mjx-math mjx-mtext {\n        line-height: normal;\n      }\n    '}),W=new Promise((e,t)=>{window.MathJax={tex:{inlineMath:[["\\(","\\)"],["$","$"]],displayMath:[["\\[","\\]"],["$$","$$"]]},chtml:{fontURL:"https://cdn.jsdelivr.net/npm/mathjax@3/es5/output/chtml/fonts/woff-v2"},options:{skipHtmlTags:["script","noscript","style","textarea","pre"]},startup:{ready:()=>{window.MathJax.startup.defaultReady(),B=!0,h("mathjax-output-css"),e()}}};const n=document.createElement("script");n.src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js",n.async=!0,n.onerror=()=>{console.error("[MathJax Loader] Failed to load MathJax from CDN"),W=null,t(new Error("Failed to load MathJax"))},document.head.appendChild(n)}),W)}async function O(e){if(e){if(await D(),window.MathJax?.typesetPromise)try{await window.MathJax.typesetPromise([e])}catch(e){console.error("[MathJax Loader] Typesetting failed:",e)}}else console.warn("[MathJax Loader] typesetMath called with null container")}var _=Object.freeze({__proto__:null,isMathJaxLoaded:function(){return B},loadMathJax:D,typesetMath:O});async function j(e){if(!e)return;const t=[];if(window.MathJax?.typesetPromise){const n=e.innerHTML;/\\\(|\\\[|\$\$?/.test(n)&&t.push(O(e))}t.length>0&&await Promise.all(t)}const q=new class{constructor(){this.subscribers=new Map,this.messageLog=[]}send(e,t,n){this.messageLog.push({timestamp:Date.now(),from:e,to:t,message:n});const a=this.subscribers.get(t);if(a&&a.size>0){const r={from:e,to:t,message:n,timestamp:Date.now()};a.forEach(e=>{try{e(r)}catch(e){console.error(`[Tunnel] Error in message handler for ${t}:`,e)}})}else console.warn(`[Tunnel] No subscribers for ${t}`)}broadcast(e,t){this.subscribers.forEach((n,a)=>{a!==e&&this.send(e,a,t)})}subscribe(e,t){this.subscribers.has(e)||this.subscribers.set(e,new Set),this.subscribers.get(e).add(t)}unsubscribe(e){this.subscribers.delete(e)}createInstanceAPI(e){return{send:(t,n)=>{this.send(e,t,n)},broadcast:t=>{this.broadcast(e,t)},onMessage:t=>{this.subscribe(e,t)}}}getMessageLog(){return[...this.messageLog]}clearMessageLog(){this.messageLog=[]}};const H=new class{constructor(){this.instances=new Map,this.compartments=new Map,this.metadata=new Map,this.hierarchy=new Map}register(e,t,n={}){this.instances.set(e,t),this.metadata.set(e,{moduleId:n.moduleId||null,parentId:n.parentId||null,cardId:n.cardId||"card1",rootElement:n.rootElement||null,container:n.container||null,createdAt:Date.now()}),n.parentId&&(this.hierarchy.has(n.parentId)||this.hierarchy.set(n.parentId,[]),this.hierarchy.get(n.parentId).push(e))}get(e){return this.instances.get(e)||null}destroy(e){if(!this.instances.get(e))return void console.warn(`[InstanceManager] Instance not found: ${e}`);[...this._getDescendants(e),e].reverse().forEach(e=>{const t=this.instances.get(e);if(t&&t.instance&&"function"==typeof t.instance.destroy)try{t.instance.destroy()}catch(t){console.error(`[InstanceManager] Error destroying ${e}:`,t)}this.destroyCompartment(e),q.unsubscribe(e),this.instances.delete(e)})}_getDescendants(e){const t=[];return(this.hierarchy.get(e)||[]).forEach(e=>{t.push(e),t.push(...this._getDescendants(e))}),t}generateInstanceId(e,t=null,n="card1"){if(!t)return`${n}:${e}`;const a=`${t}/${e}`;let r=0,o=a;for(;this.instances.has(o);)o=`${a}#${r}`,r++;return o}registerCompartment(e,t){this.compartments.set(e,t)}getCompartment(e){return this.compartments.get(e)}destroyCompartment(e){this.compartments.get(e)&&this.compartments.delete(e)}routeMessage(e,t,n){q.send(e,t,n)}getInstanceById(e){return this.instances.get(e)}clear(){this.instances.forEach((e,t)=>{if(e.instance&&"function"==typeof e.instance.destroy)try{e.instance.destroy()}catch(e){console.error(`[InstanceManager] Error destroying ${t}:`,e)}this.destroyCompartment(t),q.unsubscribe(t)}),this.instances.clear(),this.compartments.clear()}};async function z(t,n){const a=d(t.file),r=c(t.id),o=await async function(t){if(e.moduleCodeCache.has(t))return e.moduleCodeCache.get(t);if(e.preloadPromises.has(t))try{return await e.preloadPromises.get(t)}catch(e){console.warn("[ContentLoader] Preloader failed, fetching directly:",e.message)}const n=await fetch(t);if(!n.ok)throw new Error(`Failed to fetch module: ${n.status} ${n.statusText}`);const a=await n.text();return e.moduleCodeCache.set(t,a),a}(a);try{n.evaluate(o)}catch(e){throw console.error("[ContentLoader] Failed to evaluate module code:",e),new Error(`Module evaluation failed for ${t.id}: ${e.message}`)}const s=n.globalThis.window[r];if("function"!=typeof s)throw console.error("[ContentLoader] Factory lookup failed. Available on window:",Object.keys(n.globalThis.window||{})),new Error(`Factory ${r} not found or not a function in compartment for module ${t.id}`);return{factory:s,moduleCode:o}}async function J(e,a){if("PLATFORM"===function(e){const t=e.replace(/^\.\//,"");return t.startsWith("Home/")||t.startsWith("javascript/user/")?"USER":"PLATFORM"}(e.file))return console.error("[ContentLoader] ERROR: Platform modules should not be in navigation tree!"),console.error("[ContentLoader] Platform modules must be statically imported in app.js"),console.error("[ContentLoader] Attempted to load:",e.file),n.card.innerHTML="\n\nConfiguration Error: Platform module in navigation tree.",n.card.classList.remove("preload"),n.card.classList.add("loaded"),void a(null);const r=H.generateInstanceId(e.id,null,"card1"),o=document.createElement("div");o.className="module-container",o.dataset.instanceId=r,n.card.appendChild(o);const s=function(e,t){const n=1e4;let a=0,r=!1;return new Proxy({},{get:(o,s)=>"querySelector"===s?t.querySelector.bind(t):"querySelectorAll"===s?t.querySelectorAll.bind(t):"createElement"===s?function(t){if(a>=n){const t=new Error(`[DOMIsolation] DOM node limit exceeded for ${e}. Maximum 10000 nodes allowed. This prevents browser DoS attacks.`);throw console.error(t.message),t}return a++,!r&&a>=8e3&&(r=!0,console.warn(`[DOMIsolation] ${e} has created ${a} nodes (${Math.round(a/n*100)}% of limit). Consider optimizing DOM operations.`)),document.createElement.call(document,t)}:"createTextNode"===s?function(t){if(a>=n){const t=new Error(`[DOMIsolation] DOM node limit exceeded for ${e}`);throw console.error(t.message),t}return a++,!r&&a>=8e3&&(r=!0,console.warn(`[DOMIsolation] ${e} approaching node limit: ${a}/10000`)),document.createTextNode.call(document,t)}:"createDocumentFragment"===s?document.createDocumentFragment.bind(document):"createComment"===s?function(t){if(a>=n){const t=new Error(`[DOMIsolation] DOM node limit exceeded for ${e}`);throw console.error(t.message),t}return a++,document.createComment.call(document,t)}:"__nodeCount"===s?a:"__nodeLimit"===s?n:"body"===s||"head"===s||"documentElement"===s?(console.warn(`[DOMIsolation] Blocked access to document.${s} from ${e}`),null):void console.warn(`[DOMIsolation] Blocked document.${s} from ${e}`)})}(r,o),i=function(e){const t=new Map;return new Proxy({},{get:(n,a)=>["Math","JSON","Array","Object","String","Number","Boolean","Date","RegExp","Map","Set","Promise","Error","TypeError","RangeError","SyntaxError","parseInt","parseFloat","isNaN","isFinite","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent"].includes(a)?window[a]:a in n?n[a]:"document"!==a&&"localStorage"!==a&&"sessionStorage"!==a?"CustomEvent"===a?window.CustomEvent:"Event"===a?window.Event:"addEventListener"===a?function(n,a,r){const o=n.startsWith(e),s=["resize","scroll","focus","blur"].includes(n);o||s?(window.addEventListener(n,a,r),t.has(n)||t.set(n,[]),t.get(n).push({handler:a,options:r})):console.warn(`[DOMIsolation] Blocked addEventListener('${n}') from ${e}. Use tunnel API for module communication or prefix with '${e}:'`)}:"removeEventListener"===a?function(e,n,a){if(window.removeEventListener(e,n,a),t.has(e)){const a=t.get(e),r=a.findIndex(e=>e.handler===n);-1!==r&&a.splice(r,1)}}:"dispatchEvent"===a?function(t){return t.type.startsWith(e)?window.dispatchEvent(t):(console.warn(`[DOMIsolation] Blocked dispatchEvent('${t.type}') from ${e}. Event type must be prefixed with '${e}:'`),!1)}:"__moduleReady"===a&&"function"==typeof window.__moduleReady?window.__moduleReady:void console.warn(`[DOMIsolation] Blocked window.${a} from ${e}`):void console.warn(`[DOMIsolation] Blocked access to window.${a} from ${e}`),set:(t,n,a)=>n.startsWith("create")&&"function"==typeof a||"moduleInfo"===n&&"object"==typeof a?(t[n]=a,!0):(console.warn(`[DOMIsolation] Blocked setting window.${n} from ${e}`),!1)})}(r),d=q.createInstanceAPI(r),l=function(e,t,n,a,r,o){return{document:t,window:n,console:console,Math:Math,JSON:JSON,Array:Array,Object:Object,String:String,Number:Number,Boolean:Boolean,Date:Date,RegExp:RegExp,Map:Map,Set:Set,Promise:Promise,Error:Error,TypeError:TypeError,RangeError:RangeError,SyntaxError:SyntaxError,CustomEvent:CustomEvent,Event:Event,parseInt:parseInt,parseFloat:parseFloat,isNaN:isNaN,isFinite:isFinite,requestAnimationFrame:requestAnimationFrame.bind(window),cancelAnimationFrame:cancelAnimationFrame.bind(window),tunnel:harden(a),themeController:harden(r),dynamicRender:harden(o),eval:void 0,Function:void 0,setTimeout:void 0,setInterval:void 0,fetch:void 0,XMLHttpRequest:void 0,MutationObserver:void 0,IntersectionObserver:void 0,ResizeObserver:void 0}}(0,s,i,d,t,j),u=function(e,t={}){return new Compartment(t)}(0,l);H.registerCompartment(r,u),z(e,u).then(({factory:s})=>{const i={container:o,themeController:t,dynamicRender:j,instanceId:r,parentInstanceId:null,tunnel:d};let l=null;try{u.globalThis.__options=i;const t=c(e.id);l=u.evaluate(`window.${t}(__options)`)||{}}catch(e){return console.error("[ContentLoader] Module instantiation failed:",e),n.card.innerHTML="\n\nUnable to load module.",n.card.classList.remove("preload"),n.card.classList.add("loaded"),void a(null)}requestAnimationFrame(async()=>{await async function(e){if(!e)return;const t=[];(function(e){if(!e)return!1;const t=e.className;return!("string"!=typeof t||!/\bfa-|\bfas\b|\bfar\b|\bfab\b/.test(t))||e.querySelectorAll('[class*="fa-"], .fas, .far, .fab').length>0})(e)&&t.push(g());const n=e.innerHTML;/\\\(|\\\[|\$\$?/.test(n)&&t.push(D().then(()=>O(e))),t.length>0&&await Promise.all(t)}(o),n.card.classList.remove("preload"),n.card.classList.add("loaded")}),H.register(r,l,{moduleId:e.id,parentId:null,cardId:"card1",rootElement:o,container:o}),a(l)}).catch(e=>{console.error("[ContentLoader] Module loading failed:",e),n.card.innerHTML="\n\nUnable to load module.",n.card.classList.remove("preload"),n.card.classList.add("loaded"),a(null)})}function U(t){if(!t)return;if(e.activeNode&&e.activeNode.id===t.id)return;!function(){if(e.activeInstance&&"function"==typeof e.activeInstance.destroy)try{const t=e.activeNode?H.generateInstanceId(e.activeNode.id,null,"card1"):null;t?H.destroy(t):e.activeInstance.destroy()}catch(e){console.error("[ContentLoader] Failed to destroy instance:",e)}e.activeInstance=null}(),n.card.classList.remove("loaded"),n.card.classList.add("preload"),n.card.innerHTML="";const a=t.type;"module"===a?J(t,n=>{e.activeInstance=n||{},e.activeNode=t}):"page"===a?function(e,t){const a=d(e.file);fetch(a).then(e=>{if(!e.ok)throw new Error("Failed to load page: "+a);return e.text()}).then(e=>{n.card.innerHTML=e,n.card.classList.remove("preload"),n.card.classList.add("loaded"),t({})}).catch(e=>{console.error(e),n.card.innerHTML="\n\nUnable to load page.",n.card.classList.remove("preload"),n.card.classList.add("loaded"),t(null)})}(t,n=>{e.activeInstance=n||{},e.activeNode=t}):"document"===a?function(e,t){const a=d(e.file);fetch(a).then(e=>{if(!e.ok)throw new Error("Failed to load document: "+a);return e.text()}).then(e=>{const a=document.createElement("div");a.className="document-root";const r=document.createElement("pre");r.textContent=e,a.appendChild(r),n.card.appendChild(a),n.card.classList.remove("preload"),n.card.classList.add("loaded"),t({})}).catch(e=>{console.error(e),n.card.innerHTML="\n\nUnable to load document.",n.card.classList.remove("preload"),n.card.classList.add("loaded"),t(null)})}(t,n=>{e.activeInstance=n||{},e.activeNode=t}):(n.card.classList.remove("preload"),n.card.classList.add("loaded"),e.activeInstance={},e.activeNode=t)}let K=!1;function V(){if(!e.navigationTree||!e.currentFolder)return;if(!n.sidebarBreadcrumb)return;n.sidebarBreadcrumb.innerHTML="";const t=(e.currentFolder.path||"Home").split("/");t.forEach((a,o)=>{const s=o===t.length-1,i=t.slice(0,o+1).join("/"),d=document.createElement("span");if(d.textContent=a,d.className="sidebar-breadcrumb-part"+(s?" current":""),s||d.addEventListener("click",()=>{if(i===e.currentFolder.path)return;const t=r(e.navigationTree,i);t&&"folder"===t.type&&G(t)}),n.sidebarBreadcrumb.appendChild(d),!s){const e=document.createElement("span");e.textContent="/",e.className="sidebar-breadcrumb-separator",n.sidebarBreadcrumb.appendChild(e)}})}async function G(e){await X(e),window.dispatchEvent(new CustomEvent("folderNavigated",{detail:{folderNode:e}}))}async function X(t){if("undefined"!=typeof window){const e=await Promise.resolve().then(function(){return F});e.isSidebarContentInitialized&&e.isSidebarContentInitialized()&&await async function(){K||(await g(),K=!0)}()}e.currentFolder=t,n.sidebarNav.innerHTML="",V();const a=[];if(t!==e.navigationTree){const n=t.path.split("/").slice(0,-1).join("/"),o=r(e.navigationTree,n);if(o){const e=document.createElement("button");e.type="button",e.className="nav-item",e.setAttribute("data-type","folder"),e.setAttribute("data-path",o.path),e.innerHTML=`\n        <span class="nav-index"></span>\n        <span class="nav-icon">${y("back")}</span>\n        <span class="nav-label">Back</span>\n      `,a.push(e)}}t.children&&t.children.forEach((t,n)=>{const r=document.createElement("button");if(r.type="button",r.className="nav-item","folder"===t.type)r.setAttribute("data-type","folder"),r.setAttribute("data-path",t.path),r.innerHTML=`\n          <span class="nav-index">${String(n+1).padStart(2,"0")}</span>\n          <span class="nav-icon">${y("folder")}</span>\n          <span class="nav-label">${t.name}</span>\n        `;else{r.setAttribute("data-type",t.type),r.setAttribute("data-id",t.id);const a=e.moduleDisplayNames[t.id]||t.title||t.id||"Loading";r.innerHTML=`\n          <span class="nav-index">${String(n+1).padStart(2,"0")}</span>\n          <span class="nav-icon">${y(t.type)}</span>\n          <span class="nav-label">${a}</span>\n        `,e.activeNode&&e.activeNode.id===t.id&&r.classList.add("active")}a.push(r)}),a.forEach(e=>n.sidebarNav.appendChild(e)),n.sidebarNav.querySelectorAll(".nav-item").forEach(t=>{t.addEventListener("click",()=>{const n=t.getAttribute("data-type");if("folder"===n){const n=t.getAttribute("data-path");if(!n)return;const a=r(e.navigationTree,n);if(!a)return;return void G(a)}if("module"===n||"page"===n||"document"===n){const n=t.getAttribute("data-id");if(!n)return;const a=o(e.navigationTree,n);if(!a)return;S(),t.classList.add("active"),U(a),s()&&!window.matchMedia("(max-height: 600px) and (orientation: landscape)").matches||T()}})}),k()}var Z=Object.freeze({__proto__:null,navigateToFolder:G,renderBreadcrumb:V,renderSidebar:X});function Q(t){if(!t||!t.children)return{width:240,hoverNeeded:!1};const n=function(e){if(0===e.length)return 240;const t=document.createElement("div");t.style.position="absolute",t.style.left="-99999px",t.style.top="-99999px",t.style.visibility="hidden",t.style.pointerEvents="none",document.body.appendChild(t);let n=0;e.forEach(e=>{const a=document.createElement("span");a.className="nav-label",a.textContent=e,a.style.fontSize="1.2rem",a.style.lineHeight="1.1",a.style.whiteSpace="nowrap",a.style.display="inline-block",t.appendChild(a),a.offsetWidth;const r=a.getBoundingClientRect().width;r>n&&(n=r),t.removeChild(a)}),document.body.removeChild(t);const a=48+n+12+40;return Math.ceil(a)}(t.children.map(e=>"folder"===e.type?e.name||"":("module"===e.type||"page"===e.type||"document"===e.type)&&(e.title||e.id)||"").filter(e=>e.length>0));return{width:n,hoverNeeded:n>e.baseSidebarWidth}}function Y(t){if(!t||!t.children)return;const n=t.path||"Home";if(e.folderWidthCache.has(n)){const t=e.folderWidthCache.get(n);e.hoverSidebarWidth=t.width,e.hoverNeeded=t.hoverNeeded}else{const{width:a,hoverNeeded:r}=Q(t);e.folderWidthCache.set(n,{width:a,hoverNeeded:r}),e.hoverSidebarWidth=a,e.hoverNeeded=r}window.dispatchEvent(new CustomEvent("sidebarRenderNeeded",{detail:{folderNode:t}})),window.dispatchEvent(new CustomEvent("searchIndexRebuildNeeded"));const a=t.children.filter(t=>"module"===t.type&&!e.preloadedModules.has(t.id));0!==a.length&&function t(n){if(n>=a.length)return;const r=a[n],o=d(r.file);if(e.loadedScripts.has(o))return e.preloadedModules.add(r.id),void(window.requestIdleCallback?requestIdleCallback(()=>t(n+1)):Promise.resolve().then(()=>t(n+1)));const s=fetch(o).then(e=>{if(!e.ok)throw new Error(`Failed to fetch: ${e.status}`);return e.text()}).then(async t=>{e.loadedScripts.add(o),e.moduleCodeCache.set(o,t);const n=function(e){if(!e||"string"!=typeof e)return null;const t=e.match(/window\.moduleInfo\s*=\s*\{[^}]*displayName\s*:\s*["']([^"']+)["']/);if(t)return t[1];const n=e.match(/function\s+(create\w+)/);return n?n[1].replace(/^create/,"").replace(/([A-Z])/g," $1").trim():null}(t);return n&&(e.moduleDisplayNames[r.id]=n),e.preloadedModules.add(r.id),e.preloadPromises.delete(o),t}).catch(t=>{throw console.error("[Preloader] Failed to preload module:",o,t),e.preloadedModules.add(r.id),e.preloadPromises.delete(o),t});e.preloadPromises.set(o,s),s.finally(()=>{window.requestIdleCallback?requestIdleCallback(()=>t(n+1)):Promise.resolve().then(()=>t(n+1))})}(0)}function ee(e){return e}var te=Object.freeze({__proto__:null,getInitialFolder:ee,initPreloader:function(){window.addEventListener("folderNavigated",e=>{const{folderNode:t}=e.detail;Y(t)})},preloadFolderModules:Y});function ne(t,n=[],a=null){const r=[];if(!t)return r;const o=n.length>0?n.join(" > "):"";if("folder"===t.type&&t.name&&r.push({type:"folder",name:t.name,path:t.path,displayPath:o,searchText:t.name.toLowerCase(),node:t,parentNode:a}),"module"===t.type||"page"===t.type||"document"===t.type){const n=e.moduleDisplayNames[t.id]||t.title||t.id||"",s=(t.tags||[]).join(" ").toLowerCase();r.push({type:t.type,id:t.id,title:n,path:t.path,displayPath:o,searchText:(n+" "+s).toLowerCase(),node:t,parentNode:a})}if(t.children&&t.children.length>0){const e=t.name?[...n,t.name]:n;t.children.forEach(n=>{r.push(...ne(n,e,t))})}return r}function ae(){e.navigationTree&&(e.searchIndex=ne(e.navigationTree))}function re(t){if(!t||t.trim().length<2)return[];const n=t.trim(),a=[];return e.searchIndex.forEach(e=>{const t=function(e,t){const n=t.toLowerCase(),a=e.toLowerCase();if(a===n)return 1e3;if(a.startsWith(n))return 500;const r=a.split(/\s+/);for(const e of r){if(e.startsWith(n))return 300;if(e.includes(n))return 150}return a.includes(n)?100:0}(e.searchText,n);t>0&&a.push({...e,score:t})}),a.sort((e,t)=>{if(t.score!==e.score)return t.score-e.score;const n=e.title||e.name||"",a=t.title||t.name||"";return n.localeCompare(a)}),a.slice(0,15)}function oe(e){if(e&&e.node){if("folder"===e.type)G(e.node);else{let t=e.parentNode;t&&"folder"===t.type?(G(t),requestAnimationFrame(()=>{S(),U(e.node),requestAnimationFrame(()=>{requestAnimationFrame(()=>{const t=n.sidebarNav.querySelector('.nav-item[data-type="'+e.node.type+'"][data-id="'+e.node.id+'"]');t?t.classList.add("active"):console.warn("[Search] Could not find nav item for",e.node.id)})})})):console.error("[Search] Could not find valid parent folder")}n.searchInput.value="",n.searchClear.style.display="none",n.searchResults.style.display="none",n.searchResults.innerHTML="",s()||requestAnimationFrame(()=>{requestAnimationFrame(()=>T())})}else console.error("[Search] Invalid item or node")}function se(t){const a=n.searchResults.querySelectorAll(".search-result-item");0!==a.length&&(e.selectedResultIndex>=0&&e.selectedResultIndex<a.length&&a[e.selectedResultIndex].classList.remove("selected"),"down"===t?e.selectedResultIndex=(e.selectedResultIndex+1)%a.length:"up"===t&&(e.selectedResultIndex=e.selectedResultIndex<=0?a.length-1:e.selectedResultIndex-1),e.selectedResultIndex>=0&&e.selectedResultIndex<a.length&&(a[e.selectedResultIndex].classList.add("selected"),a[e.selectedResultIndex].scrollIntoView({block:"nearest"})))}var ie=Object.freeze({__proto__:null,buildSearchIndex:ne,initSearch:function(){let t=null;n.searchInput.addEventListener("input",a=>{const r=a.target.value;if(n.searchClear.style.display=r.length>0?"flex":"none",clearTimeout(t),0===r.trim().length)return n.searchResults.style.display="none",void(n.searchResults.innerHTML="");t=setTimeout(()=>{!function(t,a){if(e.selectedResultIndex=-1,0===t.length)return n.searchResults.innerHTML='<div class="search-no-results">No results found</div>',void(n.searchResults.style.display="block");const r=t.map((e,t)=>{const n=function(e,t){if(!t||!e)return e;const n=e.toLowerCase(),a=t.toLowerCase(),r=n.indexOf(a);return-1===r?e:e.substring(0,r)+'<span class="search-match">'+e.substring(r,r+t.length)+"</span>"+e.substring(r+t.length)}(e.title||e.name||"",a);return`\n      <div class="search-result-item" data-index="${t}">\n        <div class="search-result-title">\n          <span class="search-result-icon">${y(e.type)}</span>\n          <span>${n}</span>\n        </div>\n        ${e.displayPath?`<div class="search-result-path">${e.displayPath}</div>`:""}\n      </div>\n    `}).join("");n.searchResults.innerHTML=r,n.searchResults.style.display="block",n.searchResults.querySelectorAll(".search-result-item").forEach((e,n)=>{e.addEventListener("click",()=>{oe(t[n])})})}(re(r),r)},200)}),n.searchInput.addEventListener("keydown",t=>{const a="block"===n.searchResults.style.display;if("Escape"===t.key)n.searchInput.value="",n.searchClear.style.display="none",n.searchResults.style.display="none",n.searchResults.innerHTML="",n.searchInput.blur();else if("ArrowDown"===t.key&&a)t.preventDefault(),se("down");else if("ArrowUp"===t.key&&a)t.preventDefault(),se("up");else if("Enter"===t.key&&a){t.preventDefault();const a=re(n.searchInput.value);e.selectedResultIndex>=0&&e.selectedResultIndex<a.length?oe(a[e.selectedResultIndex]):a.length>0&&oe(a[0])}}),n.searchClear.addEventListener("click",()=>{n.searchInput.value="",n.searchClear.style.display="none",n.searchResults.style.display="none",n.searchResults.innerHTML="",n.searchInput.focus()}),document.addEventListener("click",e=>{n.searchInput.contains(e.target)||n.searchResults.contains(e.target)||n.searchClear.contains(e.target)||"block"===n.searchResults.style.display&&(n.searchResults.style.display="none")})},initSearchEventListeners:function(){window.addEventListener("searchIndexRebuildNeeded",()=>{ae()}),window.addEventListener("sidebarRenderNeeded",e=>{const{folderNode:t}=e.detail;Promise.resolve().then(function(){return Z}).then(e=>{e.renderSidebar(t)})})},rebuildSearchIndex:ae});function de(){function e(e=1){return new Promise(t=>{let n=0;requestAnimationFrame(function a(){n++,n>=e?t():requestAnimationFrame(a)})})}function t(){if(!window.matchMedia("(max-height: 600px) and (orientation: landscape)").matches)return void document.documentElement.removeAttribute("data-notch-side");let e=0;window.screen&&window.screen.orientation?e=window.screen.orientation.angle:void 0!==window.orientation&&(e=window.orientation),90===e?document.documentElement.setAttribute("data-notch-side","left"):-90===e||270===e?document.documentElement.setAttribute("data-notch-side","right"):function(){const e=document.documentElement;e.style.setProperty("--test-safe-left","env(safe-area-inset-left, 0px)"),e.style.setProperty("--test-safe-right","env(safe-area-inset-right, 0px)");const t=getComputedStyle(e),n=t.getPropertyValue("--test-safe-left").trim(),a=t.getPropertyValue("--test-safe-right").trim();const r=parseFloat(n)||0,o=parseFloat(a)||0;r>20?document.documentElement.setAttribute("data-notch-side","left"):o>20?document.documentElement.setAttribute("data-notch-side","right"):document.documentElement.setAttribute("data-notch-side","none");e.style.removeProperty("--test-safe-left"),e.style.removeProperty("--test-safe-right")}()}e(12).then(t),window.screen&&window.screen.orientation&&window.screen.orientation.addEventListener("change",()=>{e(18).then(t)}),window.addEventListener("orientationchange",()=>{e(18).then(t)});let n=null;window.addEventListener("resize",async()=>{n&&n.abort(),n=new AbortController;const a=n.signal;try{await Promise.race([e(15),new Promise((e,t)=>{a.addEventListener("abort",()=>t(new Error("aborted")))})]),a.aborted||t()}catch(e){}})}function ce(){return!0===window.navigator.standalone||(!!window.matchMedia("(display-mode: standalone)").matches||(!!window.matchMedia("(display-mode: fullscreen)").matches||!!window.matchMedia("(display-mode: minimal-ui)").matches))}function le(){const e=document.getElementById("pwa-cache-overlay");e&&(e.style.opacity="0",e.style.transition="opacity 0.5s ease",setTimeout(()=>e.remove(),500))}async function ue(){if(!ce())return!1;if(!("serviceWorker"in navigator))return console.warn("[PWA] Service worker not supported in this browser"),console.warn("[PWA] Possible causes:"),console.warn("[PWA]   - Not HTTPS (requires HTTPS or localhost)"),console.warn("[PWA]   - Browser too old"),console.warn("[PWA]   - Private browsing mode"),!1;if(!window.isSecureContext)return console.error("[PWA] Not a secure context (HTTPS required)"),console.error("[PWA] Current protocol:",window.location.protocol),console.error("[PWA] Service worker registration blocked"),!1;try{const e=0===(await navigator.serviceWorker.getRegistrations()).length;let t=null;e&&(t=function(){const e=document.createElement("div");return e.id="pwa-cache-overlay",e.style.cssText="\n    position: fixed;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    background: rgba(31, 31, 31, 0.95);\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    align-items: center;\n    z-index: 10000;\n    font-family: 'Uni Sans', sans-serif;\n  ",e.innerHTML='\n    <div style="text-align: center; max-width: 80%; color: #ffffff;">\n      <div style="font-size: 1.5rem; margin-bottom: 1rem; font-weight: 600;">\n        ⚡ Preparing Full Offline Mode\n      </div>\n      <div style="font-size: 0.9rem; margin-bottom: 2rem; color: #cccccc;">\n        Caching ALL assets for complete offline access...<br>\n        This may take 30-60 seconds on first install\n      </div>\n      <div style="width: 100%; max-width: 300px; height: 8px; background: rgba(255,255,255,0.2); border-radius: 4px; overflow: hidden;">\n        <div id="pwa-progress-bar" style="width: 0%; height: 100%; background: linear-gradient(90deg, #4CAF50, #8BC34A); transition: width 0.3s ease;"></div>\n      </div>\n      <div id="pwa-progress-text" style="margin-top: 1rem; font-size: 0.8rem; color: #999;">\n        0%\n      </div>\n      <div id="pwa-progress-detail" style="margin-top: 0.5rem; font-size: 0.7rem; color: #666; min-height: 1rem;">\n        Starting...\n      </div>\n    </div>\n  ',document.body.appendChild(e),e}()),navigator.serviceWorker.addEventListener("message",e=>{e.data&&"CACHE_PROGRESS"===e.data.type&&function(e,t,n,a){const r=document.getElementById("pwa-progress-bar"),o=document.getElementById("pwa-progress-text"),s=document.getElementById("pwa-progress-detail");if(r&&(r.style.width=e+"%"),o&&(o.textContent=`${e}% (${t}/${n})`),s&&a){const e=a.split("/").pop()||a,t=e.length>40?e.substring(0,37)+"...":e;s.textContent=t}}(e.data.progress,e.data.current,e.data.total,e.data.url),e.data&&"CACHE_COMPLETE"===e.data.type&&(e.data.failedAssets>0&&console.warn("[PWA] Failed:",e.data.failedAssets),setTimeout(()=>le(),1e3))});const n=await navigator.serviceWorker.register("./service-worker.js",{scope:"./"});if(navigator.storage&&navigator.storage.persist){if(await navigator.storage.persist()||console.warn("[PWA] ⚠️  Persistent storage denied (cache may be evicted)"),navigator.storage.estimate){await navigator.storage.estimate()}}return n.addEventListener("updatefound",()=>{const e=n.installing;e.addEventListener("statechange",()=>{"installed"===e.state&&navigator.serviceWorker.controller})}),!e&&t&&le(),!0}catch(e){return console.error("[PWA] Service worker registration failed:",e),console.error("[PWA Debug] Error name:",e.name),console.error("[PWA Debug] Error message:",e.message),le(),!1}}!function(){const e=/iPhone|iPad|iPod|Android/i.test(navigator.userAgent),t=ce();if(e||t){const e=document.createElement("link");e.rel="manifest",e.href="./manifest.json",document.head.appendChild(e)}}(),ce()&&ue().then(e=>{}).catch(e=>{console.error("[App] PWA initialization failed:",e)}),window.__moduleReady=l,window.MathJaxUtility=_,window.addEventListener("load",async()=>{a(),de(),await C(),N(),document.addEventListener("keydown",async e=>{(e.ctrlKey||e.metaKey)&&"k"===e.key&&(e.preventDefault(),"true"!==n.sidebar.getAttribute("data-open")&&await T(),await new Promise(e=>{$()?e():requestAnimationFrame(()=>{requestAnimationFrame(e)})}),n.searchInput&&n.searchInput.focus())}),fetch("./javascript/tree.json").then(e=>{if(!e.ok)throw new Error("Failed to load navigation tree");return e.json()}).then(async t=>{e.navigationTree=t;const a=e.navigationTree;await X(a),Y(a),ae();const{initPreloader:r}=await Promise.resolve().then(function(){return te}),{initSearchEventListeners:o}=await Promise.resolve().then(function(){return ie});r(),o();let s=null;if(a.children&&(s=a.children.find(e=>"module"===e.type||"page"===e.type||"document"===e.type)||null),s){const e=n.sidebarNav.querySelector('.nav-item[data-type="'+s.type+'"][data-id="'+s.id+'"]');e&&e.classList.add("active"),U(s)}else n.card.classList.remove("preload"),n.card.classList.add("loaded")}).catch(e=>{console.error("[App] Failed to load navigation tree:",e),n.card.classList.remove("preload"),n.card.classList.add("loaded")})}),window.addEventListener("resize",()=>{s()&&"true"===n.sidebar.getAttribute("data-open")?n.sidebar.style.width=e.baseSidebarWidth+"px":n.sidebar.style.width=""}),document.addEventListener("DOMContentLoaded",()=>{a(),n.card&&n.card.addEventListener("click",()=>{i()&&"true"===n.sidebar.getAttribute("data-open")&&T()}),n.mainContent&&n.mainContent.addEventListener("click",e=>{(e.target===n.mainContent||e.target.classList.contains("page-root"))&&i()&&"true"===n.sidebar.getAttribute("data-open")&&T()})});
//# sourceMappingURL=app.min.js.map
